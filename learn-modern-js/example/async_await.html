<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>In The Loop</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>

    <div class="container">
        <div class="h1">Watch Console :)</div>
        <button class="btn btn-primary">loop forever</button>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script defer>
        // -----------------------------------------------------
        // - QUESTION 1
        // -----------------------------------------------------

        // async function abc() {
        //     console.log(8);
        //     await Promise.resolve(2).then(console.log);
        //     console.log(3);
        // }

        // setTimeout(() => console.log(1), 0);
        // abc();
        // Promise.resolve(4).then(console.log);
        // console.log(6);

        // -----------------------------------------------------
        // - QUESTION 2
        // -----------------------------------------------------

        // function abc() {
        //     console.log(8);
        //     Promise.resolve(2).then(console.log);
        //     console.log(3);
        // }

        // setTimeout(() => console.log(1), 0);
        // abc();
        // Promise.resolve(4).then(console.log);
        // console.log(6);

        // -----------------------------------------------------
        // - QUESTION 3
        // -----------------------------------------------------
        // new Promise((resolve, reject) => {
        //     resolve(1);
        //     Promise.resolve(2).then(console.log);
        // }).then(console.log);
        // console.log(3);

        // -----------------------------------------------------
        // - QUESTION 4
        // -----------------------------------------------------
        // new Promise((resolve, reject) => {
        //         Promise.resolve().then(() => {
        //             resolve(1);
        //             console.log(2);
        //         });
        //     })
        //     .then(console.log);
        // console.log(3);

        // -----------------------------------------------------
        // - MAIN EXAMPLE
        // -----------------------------------------------------

        // function makeRequest(location) {
        //     return new Promise((resolve, reject) => {
        //         console.log(`#1 Making request to ${location}`);
        //         if (location === 'Google') {
        //             resolve('Google says Hi');
        //         } else {
        //             reject('Can only make request to Google');
        //         }
        //     });
        // }

        // function processResponse(response) {
        //     return new Promise((resolve, reject) => {
        //         console.log('#2 Processing response');
        //         resolve(`Extra information + ${response}`);
        //     });
        // }

        // Old
        // makeRequest('Google')
        //     .then(response => {
        //         console.log('Received response');
        //         // return processResponse(response);
        //         return response;
        //     })
        //     .then(processedResponse => {
        //         console.log('Processed response');
        //         console.log(`Result: ${processedResponse}`);
        //     })
        //     .catch(err => {
        //         console.log(err);
        //     });

        // New
        // async function doJob(location) {
        //     try {
        //         const response = await makeRequest(location);
        //         console.log('Received respose');
        //         const processedRespose = await processResponse(response);
        //         console.log('Processed response');
        //         console.log(`Result: ${processedRespose}`);
        //     } catch (err) {
        //         console.log(err);
        //     }
        // }

        // doJob('Facebook');

        // -----------------------------------------------------
        // - HANGING EXAMPLE
        // -----------------------------------------------------
        function loopPromise() {
            return new Promise((resolve, reject) => {
                while (true) {};
                resolve();
            })
        }

        async function hangingFuntion() {
            await loopPromise();
        }

        const btn = document.querySelector('button.btn.btn-primary');
        btn.addEventListener('click', () => {
            hangingFuntion();
        });
    </script>
</body>

</html>